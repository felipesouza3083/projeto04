(this.webpackJsonpprojeto04=this.webpackJsonpprojeto04||[]).push([[0],{148:function(e,a,t){e.exports=t(272)},272:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),o=t(60),s=t.n(o);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=t(17),l=t(18),m=t(26),i=t(20),d=t(19),u=t(117),p=t(30),h=t(118),b=function(e){var a=e.input,t=e.label,r=e.type,o=e.placeholder,s=e.meta,c=s.touched,l=s.error;return n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,t),n.a.createElement("input",Object.assign({type:r},a,{autoComplete:"off",className:"form-control",placeholder:o})),n.a.createElement("span",{className:"text-danger"},c&&l&&n.a.createElement("span",null,l)))},E=function(e){var a=e.handleSubmit;return n.a.createElement("form",{onSubmit:a},n.a.createElement(u.a,{name:"email",component:b,label:"Email de Acesso",type:"email",placeholder:"Informe o seu Email"}),n.a.createElement(u.a,{name:"senha",component:b,label:"Senha de Acesso",type:"password",placeholder:"Informe a sua senha"}),n.a.createElement("input",{type:"submit",value:"Acessar Sistema",className:"btn btn-primary btn-user btn-block"}))},f=E=Object(h.a)({form:"FormLogin",validate:function(e){var a={};return e.email||(a.email="Por favor, preencha o email."),e.senha||(a.senha="Por favor, preencha a senha"),a},onSubmitSuccess:function(e,a){a(Object(p.a)("FormLogin"))}})(E),v=t(23),g=t.n(v),N=function(){window.location.href="/"},w=function(){return localStorage.getItem("userToken")},y=function(){var e=w(),a=localStorage.getItem("userTokenExpiration"),t=new Date,r=new Date(a);return e&&r>t},C=function(e){Object(i.a)(t,e);var a=Object(d.a)(t);function t(e){var r;return Object(c.a)(this,t),(r=a.call(this,e)).handleSubmit=function(e){var a;r.setState({mensagem:"Processando requisi\xe7\xe3o, por favor aguarde...",erroAcessoNegado:"",erroValidacao:""}),(a=e,g.a.post("http://reactagenda-001-site1.ctempurl.com/api/login",a).then((function(e){return e.data}))).then((function(a){var t,r;t=e.email,r=a,window.localStorage.setItem("userTokenExpiration",r.userTokenExpiration),window.localStorage.setItem("userToken",r.userToken),window.localStorage.setItem("userEmail",t),window.location.href="/admin"})).catch((function(e){var a=e.response;switch(a.status){case 400:r.setState({mensagem:"",erroValidacao:"Ocorreram erros de valida\xe7\xe3o."});break;case 403:r.setState({mensagem:"",erroAcessoNegado:a.data});break;default:console.log(a)}}))},r.state={mensagem:"",erroAcessoNegado:"",erroValidacao:""},r.handleSubmit=r.handleSubmit.bind(Object(m.a)(r)),r}return Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row justify-content-center"},n.a.createElement("div",{className:"col-md-6"},n.a.createElement("div",{className:"card o-hidden border-0 shadow-lg my-5"},n.a.createElement("div",{className:"card-body p-0"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-lg-12"},n.a.createElement("div",{className:"p-5"},n.a.createElement("div",{className:"text-center"},n.a.createElement("h1",{className:"h4 text-gray-900 mb-4"},"Acesso ao Sistema"),n.a.createElement("hr",null)),n.a.createElement(f,{onSubmit:this.handleSubmit}),n.a.createElement("div",{className:"mt-2"},n.a.createElement("h5",null,n.a.createElement("strong",null,this.state.mensagem))),n.a.createElement("div",{className:"mt-2 text-danger"},n.a.createElement("h5",null,n.a.createElement("strong",null,this.state.erroAcessoNegado))),n.a.createElement("div",{className:"mt-2 text-danger"},n.a.createElement("h5",null,n.a.createElement("strong",null,this.state.erroValidacao))),n.a.createElement("hr",null),n.a.createElement("div",{className:"text-center"},n.a.createElement("a",{href:"/register"},"Criar conta de usu\xe1rio"))))))))))}}]),t}(n.a.Component),S=function(e){var a=e.handleSubmit;return n.a.createElement("form",{onSubmit:a},n.a.createElement(u.a,{name:"nome",component:b,label:"Nome de Acesso",type:"text",placeholder:"Informe o seu nome"}),n.a.createElement(u.a,{name:"email",component:b,label:"Email de Acesso",type:"email",placeholder:"Informe o seu Email"}),n.a.createElement(u.a,{name:"senha",component:b,label:"Senha de Acesso",type:"password",placeholder:"Informe a sua senha"}),n.a.createElement(u.a,{name:"senhaConfirmacao",component:b,label:"Confirme sua Senha",type:"password",placeholder:"Confirme a sua senha"}),n.a.createElement("input",{type:"submit",value:"Realizar Cadastro",className:"btn btn-primary btn-user btn-block"}))},j=S=Object(h.a)({form:"FormRegister",validate:function(e){var a={};return e.nome||(a.nome="Por favor, preencha o nome."),e.email||(a.email="Por favor, preencha o email."),e.senha||(a.senha="Por favor, preencha a senha"),e.senhaConfirmacao||(a.senhaConfirmacao="Por favor, confirme a senha"),e.senha!==e.senhaConfirmacao&&(a.senhaConfirmacao="Senhas n\xe3o conferem"),a},onSubmitSuccess:function(e,a){a(Object(p.a)("FormRegister"))}})(S),O=function(e){Object(i.a)(t,e);var a=Object(d.a)(t);function t(e){var r;return Object(c.a)(this,t),(r=a.call(this,e)).handleSubmit=function(e){var a;r.setState({mensagem:"Processando requisi\xe7\xe3o, por favor aguarde..."}),(a=e,g.a.post("http://reactagenda-001-site1.ctempurl.com/api/Usuario",a).then((function(e){return e.data}))).then((function(e){r.setState({mensagem:e,erroEmailJaCadastrado:"",erroValidacao:""})})).catch((function(e){var a=e.response;switch(a.status){case 400:r.setState({mensagem:"",erroValidacao:"Ocorreram erros de valida\xe7\xe3o."});break;case 403:r.setState({mensagem:"",erroEmailJaCadastrado:a.data});break;default:console.log(a)}}))},r.state={mensagem:"",erroEmailJaCadastrado:"",erroValidacao:""},r.handleSubmit=r.handleSubmit.bind(Object(m.a)(r)),r}return Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row justify-content-center"},n.a.createElement("div",{className:"col-md-6"},n.a.createElement("div",{className:"card o-hidden border-0 shadow-lg my-5"},n.a.createElement("div",{className:"card-body p-0"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-lg-12"},n.a.createElement("div",{className:"p-5"},n.a.createElement("div",{className:"text-center"},n.a.createElement("h1",{className:"h4 text-gray-900 mb-4"},"Criar conta de usu\xe1rio"),n.a.createElement("hr",null)),n.a.createElement(j,{onSubmit:this.handleSubmit}),n.a.createElement("div",{className:"mt-2"},n.a.createElement("h5",null,n.a.createElement("strong",null,this.state.mensagem))),n.a.createElement("div",{className:"mt-2 text-danger"},n.a.createElement("h5",null,n.a.createElement("strong",null,this.state.erroEmailJaCadastrado))),n.a.createElement("div",{className:"mt-2 text-danger"},n.a.createElement("h5",null,n.a.createElement("strong",null,this.state.erroValidacao))),n.a.createElement("hr",null),n.a.createElement("div",{className:"text-center"},n.a.createElement("a",{href:"/"},"Acesso ao Sistema"))))))))))}}]),t}(n.a.Component),x=t(42),k=t(11),P=function(e){var a=e.input,t=e.label,r=e.placeholder,o=e.meta,s=o.touched,c=o.error;return n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,t),n.a.createElement("textarea",Object.assign({},a,{autoComplete:"off",className:"form-control",placeholder:r})),n.a.createElement("span",{className:"text-danger"},s&&c&&n.a.createElement("span",null,c)))},A=function(e){var a=e.handleSubmit;return n.a.createElement("form",{onSubmit:a},n.a.createElement(u.a,{name:"nomeCompromisso",component:b,label:"Nome do Compromisso",type:"text",placeholder:"Informe o nome do compromisso"}),n.a.createElement(u.a,{name:"dataCompromisso",component:b,label:"Data do Compromisso",type:"date"}),n.a.createElement(u.a,{name:"horaCompromisso",component:b,label:"Hora do Compromisso",placeholder:"00:00",type:"text"}),n.a.createElement(u.a,{name:"descricao",component:P,label:"Descri\xe7\xe3o do compromisso"}),n.a.createElement("input",{type:"submit",value:"Cadastrar Compromisso",className:"btn btn-primary btn-user btn-block"}))},I=A=Object(h.a)({form:"FormCadastroCompromisso",validate:function(e){var a={};return e.nomeCompromisso||(a.nomeCompromisso="Por favor, preencha o nome do compromisso."),e.descricao||(a.descricao="Por favor, preencha a descri\xe7\xe3o."),e.dataCompromisso||(a.dataCompromisso="Por favor, preencha a data do compromisso."),e.horaCompromisso||(a.horaCompromisso="Por favor, preencha a hora do compromisso."),a},onSubmitSuccess:function(e,a){a(Object(p.a)("FormCadastroCompromisso"))}})(A),T="http://reactagenda-001-site1.ctempurl.com/api/compromisso",D=function(e,a){return g.a.get(T+"/"+e+"/"+a).then((function(e){return e.data}))};g.a.interceptors.request.use((function(e){return e.url.includes("compromisso")&&(y()?e.headers.Authorization="Bearer "+w():N()),e}),(function(e){Promise.reject(e)}));var V=function(e){Object(i.a)(t,e);var a=Object(d.a)(t);function t(e){var r;return Object(c.a)(this,t),(r=a.call(this,e)).handleSubmit=function(e){var a;r.setState({mensagem:"Processando requisi\xe7\xe3o, por favor aguarde...",erroValidacao:""}),(a=e,g.a.post(T,a).then((function(e){return e.data}))).then((function(e){r.setState({mensagem:e})})).catch((function(e){var a=e.response;switch(a.status){case 400:r.setState({mensagem:"",erroValidacao:"Ocorreram erros de valida\xe7\xe3o."});break;case 401:r.setState({mensagem:"",erroValidacao:"N\xe3o autorizado"});break;default:console.log(a)}}))},r.state={mensagem:"",erroValidacao:""},r.handleSubmit=r.handleSubmit.bind(Object(m.a)(r)),r}return Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("h1",{className:"h3 mb-2 text-gray-800"},"Cadastro de Compromissos"),n.a.createElement("p",{className:"mb-4"},"Preencha o formul\xe1rio abaixo para cadastrar compromissos em sua agenda."),n.a.createElement("div",{className:"card shadow mb-4"},n.a.createElement("div",{className:"card-header py-3"},n.a.createElement("h6",{className:"m-0 font-weight-bold text-primary"},"Formul\xe1rio de Cadastro")),n.a.createElement("div",{className:"card-body"},n.a.createElement("div",{className:"mt-2 mb-2"},n.a.createElement("h5",null,n.a.createElement("strong",null,this.state.mensagem))),n.a.createElement("div",{className:"mt-2 mb-2 text-danger"},n.a.createElement("h5",null,n.a.createElement("strong",null,this.state.erroValidacao))),n.a.createElement(I,{onSubmit:this.handleSubmit}))))}}]),t}(n.a.Component),M=function(e){var a=e.handleSubmit;return n.a.createElement("form",{onSubmit:a},n.a.createElement(u.a,{name:"dataMin",component:b,label:"Data de Inicio:",type:"date"}),n.a.createElement(u.a,{name:"dataMax",component:b,label:"Data de T\xe9rmino:",type:"date"}),n.a.createElement("input",{type:"submit",value:"Pesquisar Compromissos",className:"btn btn-primary btn-user btn-block"}))},_=M=Object(h.a)({form:"FormConsultaCompromisso",validate:function(e){var a={};return e.dataMin||(a.dataMin="Por favor, informe a data de inicio do per\xedodo."),e.dataMax||(a.dataMax="Por favor, informe a data de termino do per\xedodo."),a}})(M),F=t(27),U=function(e){Object(i.a)(t,e);var a=Object(d.a)(t);function t(){return Object(c.a)(this,t),a.apply(this,arguments)}return Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,this.props.consulta.length>0?n.a.createElement("table",{className:"table table-bordered table-stripped table-hover"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Nome do Compromisso"),n.a.createElement("th",null,"Data"),n.a.createElement("th",null,"Hora"),n.a.createElement("th",null,"Descri\xe7\xe3o"))),n.a.createElement("tbody",null,this.props.consulta.map((function(e,a){return n.a.createElement("tr",{key:a},n.a.createElement("td",null,e.nomeCompromisso),n.a.createElement("td",null,e.dataCompromisso),n.a.createElement("td",null,e.horaCompromisso),n.a.createElement("td",null,e.descricao))}))),n.a.createElement("tfoot",null,n.a.createElement("tr",null,n.a.createElement("td",{colSpan:"5"},"Quantidade de Compromissos: ",this.props.consulta.length)))):n.a.createElement("div",null,"N\xe3o h\xe1 registros"))}}]),t}(n.a.Component),q=Object(F.b)((function(e){return{consulta:e.compromissos.listagemDeCompromissos}}))(U),J=function(e){Object(i.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(c.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).handleSubmit=function(a){e.props.dispatch({type:"consultar_compromissos",data:a})},e}return Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("h1",{className:"h3 mb-2 text-gray-800"},"Consulta de Compromissos"),n.a.createElement("p",{className:"mb-4"},"Pesquise abaixo os compromissos em sua agenda"),n.a.createElement("div",{className:"card shadow mb-4"},n.a.createElement("div",{className:"card-header py-3"},n.a.createElement("h6",{className:"m-0 font-weight-bold text-primary"},"Formul\xe1rio de Pesquisa")),n.a.createElement("div",{className:"card-body"},n.a.createElement(_,{onSubmit:this.handleSubmit}),n.a.createElement("div",{className:"table-responsive mt-2"},n.a.createElement(q,null)))))}}]),t}(n.a.Component),z=Object(F.b)()(J),B=function(e){Object(i.a)(t,e);var a=Object(d.a)(t);function t(e){var r;return Object(c.a)(this,t),(r=a.call(this,e)).state={emailUsuario:""},r.obterUsuarioAutenticado=r.obterUsuarioAutenticado.bind(Object(m.a)(r)),r}return Object(l.a)(t,[{key:"obterUsuarioAutenticado",value:function(){this.setState({emailUsuario:localStorage.getItem("userEmail")})}},{key:"componentDidMount",value:function(){this.obterUsuarioAutenticado()}},{key:"logout",value:function(){window.localStorage.removeItem("userToken"),window.localStorage.removeItem("userTokenExpiration"),window.localStorage.removeItem("userEmail"),N()}},{key:"render",value:function(){var e=this;return y()?n.a.createElement(x.b,null,n.a.createElement("div",{id:"wrapper"},n.a.createElement("ul",{className:"navbar-nav bg-gradient-primary sidebar sidebar-dark accordion",id:"accordionSidebar"},n.a.createElement("a",{className:"sidebar-brand d-flex align-items-center justify-content-center",href:"/admin"},n.a.createElement("div",{className:"sidebar-brand-icon rotate-n-15"},n.a.createElement("i",{className:"fas fa-laugh-wink"})),n.a.createElement("div",{className:"sidebar-brand-text mx-3"},"Agenda de Compromissos")),n.a.createElement("hr",{className:"sidebar-divider my-0"}),n.a.createElement("li",{className:"nav-item"},n.a.createElement("a",{className:"nav-link",href:"/admin"},n.a.createElement("i",{className:"fas fa-fw fa-tachometer-alt"}),n.a.createElement("span",null,"P\xe1gina inicial"))),n.a.createElement("hr",{className:"sidebar-divider"}),n.a.createElement("div",{className:"sidebar-heading"},"Menu de Op\xe7\xf5es"),n.a.createElement("li",{className:"nav-item"},n.a.createElement("a",{className:"nav-link collapsed",href:"/admin#","data-toggle":"collapse","data-target":"#collapseTwo","aria-expanded":"true","aria-controls":"collapseTwo"},n.a.createElement("i",{className:"fas fa-fw fa-cog"}),n.a.createElement("span",null,"Gerenciar Compromissos")),n.a.createElement("div",{id:"collapseTwo",className:"collapse","aria-labelledby":"headingTwo","data-parent":"#accordionSidebar"},n.a.createElement("div",{className:"bg-white py-2 collapse-inner rounded"},n.a.createElement(x.c,{to:"/cadastro-compromisso",className:"collapse-item"},"Cadastrar Compromissos"),n.a.createElement(x.c,{to:"/consulta-compromisso",className:"collapse-item"},"Consultar Compromissos"))))),n.a.createElement("div",{id:"content-wrapper",className:"d-flex flex-column"},n.a.createElement("div",{id:"content"},n.a.createElement("nav",{className:"navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow"},n.a.createElement("button",{id:"sidebarToggleTop",className:"btn btn-link d-md-none rounded-circle mr-3"},n.a.createElement("i",{className:"fa fa-bars"})),n.a.createElement("ul",{className:"navbar-nav ml-auto"},n.a.createElement("li",{className:"nav-item dropdown no-arrow"},n.a.createElement("a",{className:"nav-link dropdown-toggle",href:"/admin#",id:"userDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},n.a.createElement("span",{className:"mr-2 d-none d-lg-inline text-gray-600 small"},n.a.createElement("strong",null,"Usu\xe1rio Autenticado:"),n.a.createElement("br",null),this.state.emailUsuario)),n.a.createElement("div",{className:"dropdown-menu dropdown-menu-right shadow animated--grow-in","aria-labelledby":"userDropdown"},n.a.createElement("a",{className:"dropdown-item",href:"/admin#"},n.a.createElement("i",{className:"fas fa-user fa-sm fa-fw mr-2 text-gray-400"}),"Minha Conta"),n.a.createElement("div",{className:"dropdown-divider"}),n.a.createElement("a",{className:"dropdown-item",href:"/admin#",onClick:function(){return e.logout()}},n.a.createElement("i",{className:"fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400"}),"Sair do Sistema"))))),n.a.createElement("div",{className:"container-fluid"},n.a.createElement(k.b,{path:"/cadastro-compromisso",component:V}),n.a.createElement(k.b,{path:"/consulta-compromisso",component:z}))),n.a.createElement("footer",{className:"sticky-footer bg-white"},n.a.createElement("div",{className:"container my-auto"},n.a.createElement("div",{className:"copyright text-center my-auto"},n.a.createElement("span",null,"Copyright \xa9 COTI Inform\xe1tica 2020"))))))):n.a.createElement(k.a,{to:{pathname:N()}})}}]),t}(n.a.Component),R=t(10),H=t(122),L=t(119),W=t(86),G={listagemDeCompromissos:[]},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"sucesso_consulta_compromissos":return Object(W.a)(Object(W.a)({},e),{},{listagemDeCompromissos:a.data});case"erro_consulta_compromissos":return console.log(a.data),e;default:return e}},$=t(36),K=t.n($),X=t(43),Y=K.a.mark(ae),Z=K.a.mark(te),ee=K.a.mark(re);function ae(e){var a,t,r;return K.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a=e.data.dataMin,t=e.data.dataMax,n.next=5,Object(X.b)(D,a,t);case 5:return r=n.sent,n.next=8,Object(X.c)({type:"sucesso_consulta_compromissos",data:r});case 8:n.next=14;break;case 10:return n.prev=10,n.t0=n.catch(0),n.next=14,Object(X.c)({type:"erro_consulta_compromissos",data:n.t0});case 14:case"end":return n.stop()}}),Y,null,[[0,10]])}function te(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(X.d)("consultar_compromissos",ae);case 2:case"end":return e.stop()}}),Z)}function re(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(X.a)([te()]);case 2:case"end":return e.stop()}}),ee)}var ne=Object(R.c)({compromissos:Q,form:L.a}),oe=Object(H.a)(),se=Object(R.e)(ne,Object(R.a)(oe));oe.run(re),s.a.render(n.a.createElement(F.a,{store:se},n.a.createElement(x.a,null,n.a.createElement(k.d,null,n.a.createElement(k.b,{path:"/",exact:!0,component:C}),n.a.createElement(k.b,{path:"/login",component:C}),n.a.createElement(k.b,{path:"/register",component:O}),n.a.createElement(k.b,{path:"/admin",component:B})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[148,1,2]]]);
//# sourceMappingURL=main.9ecfd860.chunk.js.map